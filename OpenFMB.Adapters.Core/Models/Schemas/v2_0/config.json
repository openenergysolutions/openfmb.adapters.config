{"$schema":"http://json-schema.org/schema#","id":"https://www.github.com/openenergysolutions","properties":{"logging":{"description":"common application settings","type":"object","properties":{"logger-name":{"description":"name of the logger","type":"string"},"console":{"description":"log messages to the console","type":"object","properties":{"enabled":{"description":"enable console logging","type":"boolean"}},"required":["enabled"]},"rotating-file":{"description":"log messages to rotating files","type":"object","properties":{"enabled":{"description":"enable rotating files logging","type":"boolean"},"path":{"description":"filename to use","type":"string"},"max-size":{"description":"maximum size of a single file in bytes","type":"integer","minimum":0},"max-files":{"description":"maximum number of files to keep before starting to remove old data","type":"integer","minimum":0}},"required":["enabled","path","max-size","max-files"]}},"required":["logger-name","console","rotating-file"]},"plugins":{"description":"map of plugin configurations","type":"object","properties":{"capture":{"description":"captures published OpenFMB messages to a replayable file format","type":"object","properties":{"file":{"description":"file to write to","type":"string"},"enabled":{"description":"enable this plugin","type":"boolean"}},"required":["file","enabled"]},"dnp3-master":{"description":"maps openFMB to the master side of the DNP3 protocol","type":"object","properties":{"thread-pool-size":{"description":"number of threads in the pool (defaults to std::thread::hardware_concurrency() if <= 0","type":"integer","minimum":0},"masters":{"description":"DNP3 masters","type":"array","items":{"description":"","type":"object","properties":{"path":{"description":"file to load, possibly a template","type":"string"},"overrides":{"description":"a sequence of override specifications to apply to the template","type":"array","items":{"description":"","type":"object","properties":{"key":{"description":"key","type":"string"},"value":{"description":"value","type":"string"}},"required":["key","value"]}}},"required":["path","overrides"]}},"enabled":{"description":"enable this plugin","type":"boolean"}},"required":["thread-pool-size","masters","enabled"]},"dnp3-outstation":{"description":"maps openFMB to the outstation side of the DNP3 protocol","type":"object","properties":{"thread-pool-size":{"description":"number of threads in the pool (defaults to std::thread::hardware_concurrency() if <= 0","type":"integer","minimum":0},"outstations":{"description":"DNP3 outstations","type":"array","items":{"description":"","type":"object","properties":{"path":{"description":"file to load, possibly a template","type":"string"},"overrides":{"description":"a sequence of override specifications to apply to the template","type":"array","items":{"description":"","type":"object","properties":{"key":{"description":"key","type":"string"},"value":{"description":"value","type":"string"}},"required":["key","value"]}}},"required":["path","overrides"]}},"enabled":{"description":"enable this plugin","type":"boolean"}},"required":["thread-pool-size","outstations","enabled"]},"goose-pub":{"description":"maps GOOSE protocol messages to OpenFMB","type":"object","properties":{"goCb":{"description":"GOOSE control blocks","type":"array","items":{"description":"","type":"object","properties":{"path":{"description":"file to load, possibly a template","type":"string"},"overrides":{"description":"a sequence of override specifications to apply to the template","type":"array","items":{"description":"","type":"object","properties":{"key":{"description":"key","type":"string"},"value":{"description":"value","type":"string"}},"required":["key","value"]}}},"required":["path","overrides"]}},"enabled":{"description":"enable this plugin","type":"boolean"}},"required":["goCb","enabled"]},"goose-sub":{"description":"maps OpenFMB messages to the GOOSE protocol","type":"object","properties":{"goCb":{"description":"GOOSE control blocks","type":"array","items":{"description":"","type":"object","properties":{"path":{"description":"file to load, possibly a template","type":"string"},"overrides":{"description":"a sequence of override specifications to apply to the template","type":"array","items":{"description":"","type":"object","properties":{"key":{"description":"key","type":"string"},"value":{"description":"value","type":"string"}},"required":["key","value"]}}},"required":["path","overrides"]}},"enabled":{"description":"enable this plugin","type":"boolean"}},"required":["goCb","enabled"]},"iccp-client":{"description":"maps openFMB to the client side of the ICCP protocol","type":"object","properties":{"thread-pool-size":{"description":"number of threads in the pool (defaults to std::thread::hardware_concurrency() if <= 0","type":"integer","minimum":0},"clients":{"description":"ICCP clients","type":"array","items":{"description":"","type":"object","properties":{"path":{"description":"file to load, possibly a template","type":"string"},"overrides":{"description":"a sequence of override specifications to apply to the template","type":"array","items":{"description":"","type":"object","properties":{"key":{"description":"key","type":"string"},"value":{"description":"value","type":"string"}},"required":["key","value"]}}},"required":["path","overrides"]}},"enabled":{"description":"enable this plugin","type":"boolean"}},"required":["thread-pool-size","clients","enabled"]},"iccp-server":{"description":"maps openFMB to the server side of the ICCP protocol","type":"object","properties":{"thread-pool-size":{"description":"number of threads in the pool (defaults to std::thread::hardware_concurrency() if <= 0","type":"integer","minimum":0},"servers":{"description":"list of server configuration files","type":"array","items":{"description":"","type":"object","properties":{"path":{"description":"file to load, possibly a template","type":"string"},"overrides":{"description":"a sequence of override specifications to apply to the template","type":"array","items":{"description":"","type":"object","properties":{"key":{"description":"key","type":"string"},"value":{"description":"value","type":"string"}},"required":["key","value"]}}},"required":["path","overrides"]}},"enabled":{"description":"enable this plugin","type":"boolean"}},"required":["thread-pool-size","servers","enabled"]},"log":{"description":"pretty prints profiles to the log","type":"object","properties":{"log_debug_string":{"description":"log the entire protobuf debug string for every profile","type":"boolean"},"filters":{"description":"filters to apply before printing the values","type":"array","items":{"description":"","type":"object","properties":{"profile":{"description":"OpenFMB profile to filter","type":"string","enum":["BreakerDiscreteControlProfile","BreakerEventProfile","BreakerReadingProfile","BreakerStatusProfile","CapBankControlProfile","CapBankDiscreteControlProfile","CapBankEventProfile","CapBankReadingProfile","CapBankStatusProfile","ESSControlProfile","ESSEventProfile","ESSReadingProfile","ESSStatusProfile","GenerationControlProfile","GenerationDiscreteControlProfile","GenerationEventProfile","GenerationReadingProfile","GenerationStatusProfile","LoadControlProfile","LoadEventProfile","LoadReadingProfile","LoadStatusProfile","MeterReadingProfile","RecloserDiscreteControlProfile","RecloserEventProfile","RecloserReadingProfile","RecloserStatusProfile","RegulatorDiscreteControlProfile","RegulatorControlProfile","RegulatorEventProfile","RegulatorReadingProfile","RegulatorStatusProfile","ResourceDiscreteControlProfile","ResourceEventProfile","ResourceReadingProfile","ResourceStatusProfile","SolarControlProfile","SolarEventProfile","SolarReadingProfile","SolarStatusProfile","SwitchDiscreteControlProfile","SwitchEventProfile","SwitchReadingProfile","SwitchStatusProfile"]},"name":{"description":"conducting equipment name","type":"string"},"path":{"description":"file to which values will be appended","type":"string"},"print_alias":{"description":"print the alias associated with the value","type":"boolean"},"log_all_values":{"description":"print all the values of this conducting equipment to stdout","type":"boolean"},"values":{"description":"list of values to extract from the profile","type":"array","items":{"description":"","type":"object","properties":{"tag":{"description":"path of the value in the profile","type":"string"},"alias":{"description":"alias that will optionally be printed with the value","type":"string"},"digits":{"description":"number of digits to keep","type":"integer","minimum":0}},"required":["tag","alias","digits"]}}},"required":["profile","name","path","print_alias","log_all_values","values"]}},"enabled":{"description":"enable this plugin","type":"boolean"}},"required":["log_debug_string","filters","enabled"]},"modbus-master":{"description":"maps OpenFMB to the Modbus protocol","type":"object","properties":{"thread-pool-size":{"description":"number of threads in the pool (defaults to std::thread::hardware_concurrency() if <= 0","type":"integer","minimum":0},"sessions":{"description":"Modbus sessions","type":"array","items":{"description":"","type":"object","properties":{"path":{"description":"file to load, possibly a template","type":"string"},"overrides":{"description":"a sequence of override specifications to apply to the template","type":"array","items":{"description":"","type":"object","properties":{"key":{"description":"key","type":"string"},"value":{"description":"value","type":"string"}},"required":["key","value"]}}},"required":["path","overrides"]}},"enabled":{"description":"enable this plugin","type":"boolean"}},"required":["thread-pool-size","sessions","enabled"]},"modbus-outstation":{"description":"maps the Modbus protocol to OpenFMB","type":"object","properties":{"thread-pool-size":{"description":"number of threads in the pool (defaults to std::thread::hardware_concurrency() if <= 0","type":"integer","minimum":0},"sessions":{"description":"list of session configuration files","type":"array","items":{"description":"","type":"object","properties":{"path":{"description":"file to load, possibly a template","type":"string"},"overrides":{"description":"a sequence of override specifications to apply to the template","type":"array","items":{"description":"","type":"object","properties":{"key":{"description":"key","type":"string"},"value":{"description":"value","type":"string"}},"required":["key","value"]}}},"required":["path","overrides"]}},"enabled":{"description":"enable this plugin","type":"boolean"}},"required":["thread-pool-size","sessions","enabled"]},"mqtt":{"description":"publish/subscribe to a MQTT broker","type":"object","properties":{"max-queued-messages":{"description":"how many messages to buffer before discarding the oldest","type":"integer","minimum":0},"server-address":{"description":"URL to the MQTT broker","type":"string"},"client-id":{"description":"MQTT client ID","type":"string"},"connect-retry-delay-ms":{"description":"number of milliseconds to wait before trying to re-establish a connection to the broker","type":"integer","minimum":0},"security":{"description":"security configuration","type":"object","properties":{},"oneOf":[{"properties":{"security-type":{"const":"none"}},"required":["security-type"]},{"properties":{"security-type":{"const":"tls_server_auth"},"ca-trusted-cert-file":{"description":"trusted public certificate of the server","type":"string"},"username":{"description":"username for authentication","type":"string"},"password":{"description":"password for authentication","type":"string"}},"required":["security-type","ca-trusted-cert-file"]},{"properties":{"security-type":{"const":"tls_mutual_auth"},"ca-trusted-cert-file":{"description":"trusted public certificate of the server","type":"string"},"client-private-key-file":{"description":"private key to use for authentication","type":"string"},"client-cert-chain-file":{"description":"public key to use for authentication","type":"string"},"username":{"description":"username for authentication","type":"string"},"password":{"description":"password for authentication","type":"string"}},"required":["security-type","ca-trusted-cert-file","client-private-key-file","client-cert-chain-file"]}]},"publish":{"description":"profile to send to the NATS broker","type":"array","items":{"description":"","type":"object","properties":{"profile":{"description":"name of the profile to send","type":"string","enum":["BreakerDiscreteControlProfile","BreakerEventProfile","BreakerReadingProfile","BreakerStatusProfile","CapBankControlProfile","CapBankDiscreteControlProfile","CapBankEventProfile","CapBankReadingProfile","CapBankStatusProfile","ESSControlProfile","ESSEventProfile","ESSReadingProfile","ESSStatusProfile","GenerationControlProfile","GenerationDiscreteControlProfile","GenerationEventProfile","GenerationReadingProfile","GenerationStatusProfile","LoadControlProfile","LoadEventProfile","LoadReadingProfile","LoadStatusProfile","MeterReadingProfile","RecloserDiscreteControlProfile","RecloserEventProfile","RecloserReadingProfile","RecloserStatusProfile","RegulatorDiscreteControlProfile","RegulatorControlProfile","RegulatorEventProfile","RegulatorReadingProfile","RegulatorStatusProfile","ResourceDiscreteControlProfile","ResourceEventProfile","ResourceReadingProfile","ResourceStatusProfile","SolarControlProfile","SolarEventProfile","SolarReadingProfile","SolarStatusProfile","SwitchDiscreteControlProfile","SwitchEventProfile","SwitchReadingProfile","SwitchStatusProfile"]},"topic-suffix":{"description":"mRID of the profile to send to, or * for all","type":"string","pattern":"\\*|([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})"}},"required":["profile","topic-suffix"]}},"subscribe":{"description":"profile to receive from the NATS broker","type":"array","items":{"description":"","type":"object","properties":{"profile":{"description":"name of the profile to subscribe to","type":"string","enum":["BreakerDiscreteControlProfile","BreakerEventProfile","BreakerReadingProfile","BreakerStatusProfile","CapBankControlProfile","CapBankDiscreteControlProfile","CapBankEventProfile","CapBankReadingProfile","CapBankStatusProfile","ESSControlProfile","ESSEventProfile","ESSReadingProfile","ESSStatusProfile","GenerationControlProfile","GenerationDiscreteControlProfile","GenerationEventProfile","GenerationReadingProfile","GenerationStatusProfile","LoadControlProfile","LoadEventProfile","LoadReadingProfile","LoadStatusProfile","MeterReadingProfile","RecloserDiscreteControlProfile","RecloserEventProfile","RecloserReadingProfile","RecloserStatusProfile","RegulatorDiscreteControlProfile","RegulatorControlProfile","RegulatorEventProfile","RegulatorReadingProfile","RegulatorStatusProfile","ResourceDiscreteControlProfile","ResourceEventProfile","ResourceReadingProfile","ResourceStatusProfile","SolarControlProfile","SolarEventProfile","SolarReadingProfile","SolarStatusProfile","SwitchDiscreteControlProfile","SwitchEventProfile","SwitchReadingProfile","SwitchStatusProfile"]},"topic-suffix":{"description":"mRID of the profile to subscribe to, or * for all","type":"string","pattern":"\\*|([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})"}},"required":["profile","topic-suffix"]}},"enabled":{"description":"enable this plugin","type":"boolean"}},"required":["max-queued-messages","server-address","client-id","connect-retry-delay-ms","security","publish","subscribe","enabled"]},"nats":{"description":"publish/subscribe to a NATS server","type":"object","properties":{"max-queued-messages":{"description":"how many messages to buffer before discarding the oldest","type":"integer","minimum":0},"connect-url":{"description":"URL to the NATS server","type":"string"},"connect-retry-seconds":{"description":"number of seconds to wait before trying to re-establish a connection to the server","type":"integer","minimum":0},"security":{"description":"security configuration","type":"object","properties":{"jwt-creds-file":{"description":"JSON Web Token credential file to use","type":"string"}},"oneOf":[{"properties":{"security-type":{"const":"none"}},"required":["security-type"]},{"properties":{"security-type":{"const":"tls_server_auth"},"ca-trusted-cert-file":{"description":"trusted public certificate of the server","type":"string"}},"required":["security-type","ca-trusted-cert-file"]},{"properties":{"security-type":{"const":"tls_mutual_auth"},"ca-trusted-cert-file":{"description":"trusted public certificate of the server","type":"string"},"client-private-key-file":{"description":"private key to use for authentication","type":"string"},"client-cert-chain-file":{"description":"public key to use for authentication","type":"string"}},"required":["security-type","ca-trusted-cert-file","client-private-key-file","client-cert-chain-file"]}]},"publish":{"description":"profile to send to the NATS broker","type":"array","items":{"description":"","type":"object","properties":{"profile":{"description":"name of the profile to send","type":"string","enum":["BreakerDiscreteControlProfile","BreakerEventProfile","BreakerReadingProfile","BreakerStatusProfile","CapBankControlProfile","CapBankDiscreteControlProfile","CapBankEventProfile","CapBankReadingProfile","CapBankStatusProfile","ESSControlProfile","ESSEventProfile","ESSReadingProfile","ESSStatusProfile","GenerationControlProfile","GenerationDiscreteControlProfile","GenerationEventProfile","GenerationReadingProfile","GenerationStatusProfile","LoadControlProfile","LoadEventProfile","LoadReadingProfile","LoadStatusProfile","MeterReadingProfile","RecloserDiscreteControlProfile","RecloserEventProfile","RecloserReadingProfile","RecloserStatusProfile","RegulatorDiscreteControlProfile","RegulatorControlProfile","RegulatorEventProfile","RegulatorReadingProfile","RegulatorStatusProfile","ResourceDiscreteControlProfile","ResourceEventProfile","ResourceReadingProfile","ResourceStatusProfile","SolarControlProfile","SolarEventProfile","SolarReadingProfile","SolarStatusProfile","SwitchDiscreteControlProfile","SwitchEventProfile","SwitchReadingProfile","SwitchStatusProfile"]},"subject":{"description":"mRID of the profile to send to, or * for all","type":"string","pattern":"\\*|([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})"}},"required":["profile","subject"]}},"subscribe":{"description":"profile to receive from the NATS broker","type":"array","items":{"description":"","type":"object","properties":{"profile":{"description":"name of the profile to subscribe to","type":"string","enum":["BreakerDiscreteControlProfile","BreakerEventProfile","BreakerReadingProfile","BreakerStatusProfile","CapBankControlProfile","CapBankDiscreteControlProfile","CapBankEventProfile","CapBankReadingProfile","CapBankStatusProfile","ESSControlProfile","ESSEventProfile","ESSReadingProfile","ESSStatusProfile","GenerationControlProfile","GenerationDiscreteControlProfile","GenerationEventProfile","GenerationReadingProfile","GenerationStatusProfile","LoadControlProfile","LoadEventProfile","LoadReadingProfile","LoadStatusProfile","MeterReadingProfile","RecloserDiscreteControlProfile","RecloserEventProfile","RecloserReadingProfile","RecloserStatusProfile","RegulatorDiscreteControlProfile","RegulatorControlProfile","RegulatorEventProfile","RegulatorReadingProfile","RegulatorStatusProfile","ResourceDiscreteControlProfile","ResourceEventProfile","ResourceReadingProfile","ResourceStatusProfile","SolarControlProfile","SolarEventProfile","SolarReadingProfile","SolarStatusProfile","SwitchDiscreteControlProfile","SwitchEventProfile","SwitchReadingProfile","SwitchStatusProfile"]},"subject":{"description":"mRID of the profile to subscribe to, or * for all","type":"string","pattern":"\\*|([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})"}},"required":["profile","subject"]}},"enabled":{"description":"enable this plugin","type":"boolean"}},"required":["max-queued-messages","connect-url","connect-retry-seconds","security","publish","subscribe","enabled"]},"replay":{"description":"replays captured OpenFMB messages from a file","type":"object","properties":{"file":{"description":"file to read from","type":"string"},"enabled":{"description":"enable this plugin","type":"boolean"}},"required":["file","enabled"]},"timescaledb":{"description":"saves all the published messages to a TimescaleDB","type":"object","properties":{"database-url":{"description":"database connection URL","type":"string"},"store-measurement":{"description":"store measurements","type":"boolean"},"table-name":{"description":"database table name for measurements","type":"string"},"store-raw-message":{"description":"store raw data in the database","type":"boolean"},"raw-table-name":{"description":"database table name for raw data","type":"string"},"raw-data-format":{"description":"0 for json, 1 for protobuf","type":"integer","minimum":0,"maximum":1},"max-queued-messages":{"description":"how many messages to buffer before discarding the oldest","type":"integer","minimum":0},"connect-retry-seconds":{"description":"time (in seconds) to wait between two connection attempts","type":"integer","minimum":0},"enabled":{"description":"enable this plugin","type":"boolean"}},"required":["database-url","store-measurement","table-name","store-raw-message","raw-table-name","raw-data-format","max-queued-messages","connect-retry-seconds","enabled"]}}}},"required":["logging","plugins"],"definitions":{}}
